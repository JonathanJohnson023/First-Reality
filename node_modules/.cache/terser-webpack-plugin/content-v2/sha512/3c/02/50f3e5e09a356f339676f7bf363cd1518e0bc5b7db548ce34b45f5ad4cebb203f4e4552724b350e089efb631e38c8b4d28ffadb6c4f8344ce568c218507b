{"map":"{\"version\":3,\"sources\":[\"bundle.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"__webpack_exports__\",\"menu_Menu\",\"[object Object]\",\"querySelec\",\"menuId\",\"this\",\"tokenMenu\",\"cursor\",\"document\",\"createElement\",\"className\",\"src\",\"divShadow\",\"cursorMove\",\"Audio\",\"volume\",\"cursorSelect\",\"menuItems\",\"querySelectorAll\",\"selectMouseOver\",\"keyPressed\",\"selectMouseClick\",\"e\",\"preventDefault\",\"target\",\"parentNode\",\"id\",\"parseInt\",\"getAttribute\",\"selection\",\"play\",\"keyCode\",\"prepend\",\"selectedNumber\",\"Character\",\"job\",\"ctx\",\"sprite\",\"index\",\"level\",\"maxHealth\",\"health\",\"KO\",\"frame\",\"forward\",\"back\",\"partyHpUi\",\"getElementById\",\"getContext\",\"font\",\"spriteHeight\",\"canvasX\",\"canvas\",\"width\",\"canvasY\",\"height\",\"heightFloat\",\"Math\",\"abs\",\"callback\",\"walkForward\",\"walkBack\",\"drawImage\",\"clearRect\",\"fillText\",\"isOdd\",\"monster\",\"console\",\"log\",\"damage\",\"floor\",\"random\",\"showDamage\",\"damageText\",\"textContent\",\"style\",\"position\",\"color\",\"fontSize\",\"fontWeight\",\"zIndex\",\"pointerEvents\",\"left\",\"top\",\"transform\",\"animation\",\"body\",\"appendChild\",\"setTimeout\",\"removeChild\",\"int\",\"num\",\"Number\",\"toString\",\"replace\",\"parseFloat\",\"Monster\",\"Image\",\"monsterHpUi\",\"smallMonsters\",\"medMonsters\",\"save\",\"globalAlpha\",\"restore\",\"healthPercent\",\"fillStyle\",\"game_Game\",\"party\",\"enemies\",\"wave\",\"currentChar\",\"currentCharIndex\",\"aniDone\",\"partyMenu\",\"battleState\",\"turnQueue\",\"currentTurn\",\"actionInProgress\",\"draw\",\"charIndexIncrease\",\"processTurn\",\"window\",\"innerWidth\",\"innerHeight\",\"fillRect\",\"drawBackground\",\"addSprites\",\"drawMonsters\",\"addEventListener\",\"backgroundColor\",\"titleMenu\",\"knight\",\"cleric\",\"archer\",\"wizard\",\"push\",\"addEnemy\",\"menu\",\"partySelectEventCallback\",\"classList\",\"contains\",\"type\",\"onSelect\",\"background\",\"forEach\",\"obj\",\"selectedAction\",\"innerText\",\"performAttack\",\"performDefend\",\"aliveEnemies\",\"filter\",\"enemy\",\"isAlive\",\"length\",\"checkBattleEnd\",\"targetEnemy\",\"attack\",\"nextTurn\",\"defending\",\"enemyTurn\",\"aliveParty\",\"char\",\"enemyIndex\",\"enemyAttackInterval\",\"setInterval\",\"clearInterval\",\"showVictoryScreen\",\"showDefeatScreen\",\"alert\",\"resetBattle\",\"numEnemies\",\"Tutorial\",\"GameRouter\",\"game\",\"tutorial\",\"menuCtx\",\"lastTime\",\"title\",\"time\",\"selectEventCallback\",\"select\",\"titleAudio\",\"remove\",\"add\",\"pause\",\"start\",\"once\",\"requestAnimationFrame\",\"gameAnimate\",\"Menu\",\"initVolumeControls\",\"volumeSlider\",\"volumeDisplay\",\"muteToggle\",\"warn\",\"isMuted\",\"updateVolumeDisplay\",\"round\",\"muted\",\"paused\",\"catch\",\"addStrobeEffect\",\"pressEnterElement\",\"querySelector\",\"menuClass\",\"enemiesUi\",\"partyUi\",\"theGame\",\"gameRouter\",\"titleScreenBool\",\"titleScreen\"],\"mappings\":\"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\"}","code":"!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){\"use strict\";s.r(e);class i{constructor(t,e){this.tokenMenu=0,this.menuId=e,this.cursor=document.createElement(\"img\"),this.cursor.className=\"selected\",this.cursor.src=\"https://www.dropbox.com/s/1pq4d1ksjv3tuoz/FF7Cursor.png?raw=1\",this.divShadow=document.createElement(\"div\"),this.divShadow.className=\"shadow\",this.cursorMove=new Audio,this.cursorMove.src=\"https://www.dropbox.com/s/fiyx4q2mdwynraj/FF7CursorMove.mp3?raw=1\",this.cursorMove.volume=.4,this.cursorSelect=new Audio,this.cursorSelect.src=\"https://www.dropbox.com/s/v04ewrevpnnsz03/FF7CursorSaveLoad.mp3?raw=1\",this.cursorSelect.volume=.4,this.menuItems=document.querySelectorAll(`${t}`),this.selectMouseOver=this.selectMouseOver.bind(this),this.keyPressed=this.keyPressed.bind(this),this.selectMouseClick=this.selectMouseClick.bind(this)}selectMouseOver(t){t.preventDefault(),t.target.parentNode.id==this.menuId&&(this.tokenMenu=parseInt(t.target.getAttribute(\"number\")),this.selection(this.tokenMenu),this.cursorMove.play())}selectMouseClick(t){if(t.preventDefault(),t.target.parentNode.id==this.menuId)return this.tokenMenu=parseInt(t.target.getAttribute(\"number\")),this.cursorSelect.play(),this.menuItems[this.tokenMenu]}keyPressed(t){if(t.preventDefault(),38==t.keyCode)this.tokenMenu>0?this.tokenMenu-=1:this.tokenMenu=1,this.selection(this.tokenMenu),this.cursorMove.play();else if(40==t.keyCode)this.tokenMenu<1?this.tokenMenu+=1:this.tokenMenu=0,this.selection(this.tokenMenu),this.cursorMove.play();else if(13==t.keyCode)return this.cursorSelect.play(),this.menuItems[this.tokenMenu]}selection(t){this.menuItems[t].prepend(this.cursor),this.menuItems[t].prepend(this.divShadow)}select(t){return this.menuItems[t]}}class n{constructor(t,e,s,i){this.level=1,this.maxHealth=100,this.health=this.maxHealth,this.KO=!1,this.job=t,this.ctx=e,this.sprite=s,this.index=i,this.frame=0,this.forward=!1,this.back=!1,this.partyHpUi=document.getElementById(\"party-ui\").getContext(\"2d\"),this.partyHpUi.font=\"26px Final Fantasy\",this.spriteHeight(i),this.canvasX=.85*this.ctx.canvas.width,this.canvasY=this.ctx.canvas.height*this.heightFloat+.3*this.ctx.canvas.height}isOdd(t){return 1==Math.abs(t%2)}draw(t){this.forward&&this.frame<=9?this.walkForward(t):this.back&&this.frame>=1?this.walkBack():this.ctx.drawImage(this.sprite,0,0,64,64,this.canvasX,this.canvasY,125,125),this.partyHpUi.clearRect(0,this.index*(this.partyHpUi.canvas.height/4),this.partyHpUi.canvas.width,this.partyHpUi.canvas.height),this.partyHpUi.fillText(this.job,25,(this.index+1)*(this.partyHpUi.canvas.height/4)),this.partyHpUi.fillText(`${this.health} / ${this.maxHealth}`,this.partyHpUi.canvas.width-125,(this.index+1)*(this.partyHpUi.canvas.height/4))}walkForward(t){this.frame++,this.isOdd(this.frame)?this.ctx.drawImage(this.sprite,64,0,64,64,this.canvasX-=parseInt(this.frame+\"0\"),this.canvasY,125,125):this.frame<=9&&this.ctx.drawImage(this.sprite,0,0,64,64,this.canvasX-=parseInt(this.frame+\"0\"),this.canvasY,125,125),10==this.frame&&t()}walkBack(){this.frame--,this.isOdd(this.frame)?this.ctx.drawImage(this.sprite,64,0,64,64,this.canvasX+=parseInt(this.frame+\"0\"),this.canvasY,125,125):this.frame>=1&&this.ctx.drawImage(this.sprite,0,0,64,64,this.canvasX+=parseInt(this.frame+\"0\"),this.canvasY,125,125)}attack(t){if(t.health<=0)return void console.log(\"Monster is already dead!\");const e=Math.floor(30*Math.random())+15;t.health-=e,t.health<=0?(t.health=0,t.KO=!0,console.log(`Monster defeated! Dealt ${e} damage.`)):console.log(`Dealt ${e} damage to monster. Monster health: ${t.health}`),this.showDamage(e)}showDamage(t){const e=document.createElement(\"div\");e.textContent=`-${t}`,e.style.position=\"absolute\",e.style.color=\"#ff4444\",e.style.fontSize=\"24px\",e.style.fontWeight=\"bold\",e.style.zIndex=\"1000\",e.style.pointerEvents=\"none\",e.style.left=\"50%\",e.style.top=\"30%\",e.style.transform=\"translateX(-50%)\",e.style.animation=\"damageFloat 1.5s ease-out forwards\",document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},1500)}spriteHeight(t){let e=Number((t+.5*t).toString().replace(\".\",\"\"));this.heightFloat=parseFloat(`0.${e}`)}}class a{constructor(t,e){this.level=1,this.maxHealth=100,this.health=this.maxHealth,this.KO=!1,this.ctx=t,this.sprite=new Image,this.sprite.src=\"Final_Fantasy_1_Enemies & Bosses.png\",this.index=e,this.frame=0,this.monsterHpUi=document.getElementById(\"enemies-ui\").getContext(\"2d\"),this.monsterHpUi.font=\"26px Final Fantasy\",this.spriteHeight(e),this.canvasX=this.ctx.canvas.width/8,this.canvasY=this.ctx.canvas.height*this.heightFloat+this.ctx.canvas.height/3.5,this.smallMonsters=[[0,0,36,64]],this.medMonsters=[]}draw(){!this.KO&&this.health>0?this.ctx.drawImage(this.sprite,...this.smallMonsters[0],this.canvasX,this.canvasY,125,200):(this.ctx.save(),this.ctx.globalAlpha=.3,this.ctx.drawImage(this.sprite,...this.smallMonsters[0],this.canvasX,this.canvasY,125,200),this.ctx.restore()),this.monsterHpUi.clearRect(0,this.index*(this.monsterHpUi.canvas.height/4),this.monsterHpUi.canvas.width,this.monsterHpUi.canvas.height);const t=this.health/this.maxHealth;this.monsterHpUi.fillStyle=t>.6?\"#00ff00\":t>.3?\"#ffff00\":\"#ff0000\",this.monsterHpUi.fillText(`Monster ${this.index+1}`,25,(this.index+1)*(this.monsterHpUi.canvas.height/4)),this.monsterHpUi.fillText(`${this.health} / ${this.maxHealth}`,this.monsterHpUi.canvas.width-125,(this.index+1)*(this.monsterHpUi.canvas.height/4)),this.monsterHpUi.fillStyle=\"#ffffff\"}death(){this.KO=!0,this.health=0,console.log(`Monster ${this.index+1} has been defeated!`)}attack(t){if(this.KO||this.health<=0)return;const e=Math.floor(20*Math.random())+10;return t.health-=e,t.health<=0?(t.health=0,t.KO=!0,console.log(`${t.job} has been defeated! Monster dealt ${e} damage.`)):console.log(`Monster dealt ${e} damage to ${t.job}. ${t.job} health: ${t.health}`),e}isAlive(){return!this.KO&&this.health>0}spriteHeight(t){let e=Number((t+.5*t).toString().replace(\".\",\"\"));this.heightFloat=parseFloat(`0.${e}`)}}class r{constructor(t){this.party=[],this.enemies=[],this.wave=0,this.currentChar=null,this.currentCharIndex=0,this.ctx=t,this.frame=0,this.aniDone=!1,this.partyMenu=new i(\"#party-moves li\",\"party-moves\"),this.wave=0,this.battleState=\"player-turn\",this.turnQueue=[],this.currentTurn=0,this.actionInProgress=!1,this.draw=this.draw.bind(this),this.charIndexIncrease=this.charIndexIncrease.bind(this),this.processTurn=this.processTurn.bind(this)}draw(){this.currentChar=this.party[this.currentCharIndex],this.ctx.width=window.innerWidth,this.ctx.height=window.innerHeight,this.ctx.clearRect(0,0,this.ctx.width,this.ctx.height),this.ctx.fillStyle=\"black\",this.ctx.fillRect(0,0,this.ctx.width,this.ctx.height),this.drawBackground(),this.addSprites(),this.drawMonsters(),document.body.addEventListener(\"animationend\",()=>{document.body.style.backgroundColor=\"black\",this.aniDone=!0,this.currentChar&&(this.currentChar.forward=!0)})}start(t){const e=new n(\"Knight\",this.ctx,null,0),s=new n(\"Cleric\",this.ctx,null,1),i=new n(\"Archer\",this.ctx,null,2),a=new n(\"Wizard\",this.ctx,null,3);this.party.push(e,s,i,a),this.addEnemy();const r=document.getElementById(\"party-moves\");r.addEventListener(\"mouseover\",this.partyMenu.selectMouseOver),r.addEventListener(\"click\",t=>{this.partySelectEventCallback(t)}),document.addEventListener(\"keydown\",t=>{this.partySelectEventCallback(t)}),this.partyMenu.selection(0)}partySelectEventCallback(t){const e=document.getElementById(\"party-moves\");if(13!=t.keyCode||e.classList.contains(\"none\")){if(\"click\"!=t.type)return this.partyMenu.keyPressed(t);this.onSelect(this.partyMenu.selectMouseClick(t))}else this.onSelect(this.partyMenu.keyPressed(t))}drawBackground(){const t=new Image;t.src=\"battle_backgrounds.png\",this.ctx.drawImage(t,522,5,270,155,0,0,this.ctx.width,this.ctx.height)}addSprites(){this.party.forEach((t,e)=>{let s=new Image;s.src=`image${e}.png`,t.sprite=s,t.index=e,t.draw(this.charIndexIncrease)})}drawMonsters(){this.enemies.forEach((t,e)=>{t.draw()})}onSelect(t){if(this.actionInProgress||\"player-turn\"!==this.battleState)return;this.actionInProgress=!0;const e=t.innerText;\"Attack\"===e?this.performAttack():\"Defend\"===e&&this.performDefend()}performAttack(){const t=this.enemies.filter(t=>t.isAlive());if(0===t.length)return void this.checkBattleEnd();const e=t[Math.floor(Math.random()*t.length)];this.currentChar.back=!1,this.currentChar.forward=!0,this.currentChar.attack(e),setTimeout(()=>{this.currentChar.back=!0,this.currentChar.forward=!1,this.actionInProgress=!1,this.nextTurn()},1e3)}performDefend(){console.log(`${this.currentChar.job} is defending!`),this.currentChar.defending=!0,setTimeout(()=>{this.actionInProgress=!1,this.nextTurn()},500)}nextTurn(){this.checkBattleEnd()||(this.charIndexIncrease(),0===this.currentCharIndex&&(this.battleState=\"enemy-turn\",this.enemyTurn()))}enemyTurn(){const t=this.enemies.filter(t=>t.isAlive()),e=this.party.filter(t=>!t.KO);if(0===t.length||0===e.length)return void this.checkBattleEnd();let s=0;const i=setInterval(()=>{if(s>=t.length)return clearInterval(i),this.party.forEach(t=>t.defending=!1),void(this.battleState=\"player-turn\");const n=t[s],a=e[Math.floor(Math.random()*e.length)];if(a&&!a.KO){let t=n.attack(a);a.defending&&(t=Math.floor(.5*t),a.health+=Math.floor(.5*t),console.log(`${a.job} defended and reduced damage!`))}s++},1e3)}checkBattleEnd(){const t=this.enemies.filter(t=>t.isAlive()),e=this.party.filter(t=>!t.KO&&t.health>0);return 0===t.length?(this.battleState=\"victory\",console.log(\"Victory! All enemies defeated!\"),this.showVictoryScreen(),!0):0===e.length&&(this.battleState=\"defeat\",console.log(\"Defeat! All party members have fallen!\"),this.showDefeatScreen(),!0)}showVictoryScreen(){setTimeout(()=>{alert(\"Victory! You defeated all enemies!\"),this.resetBattle()},1e3)}showDefeatScreen(){setTimeout(()=>{alert(\"Defeat! Game Over!\"),this.resetBattle()},1e3)}resetBattle(){this.party.forEach(t=>{t.health=t.maxHealth,t.KO=!1,t.defending=!1}),this.enemies=[],this.addEnemy(),this.currentCharIndex=0,this.battleState=\"player-turn\",this.actionInProgress=!1}addEnemy(){const t=Math.floor(4*Math.random())+1;for(let e=0;e<t;e++){const t=new a(this.ctx,e);this.enemies.push(t)}}charIndexIncrease(){do{this.currentCharIndex>=3?this.currentCharIndex=0:this.currentCharIndex++}while(this.party[this.currentCharIndex]&&this.party[this.currentCharIndex].KO)}}class h{constructor(t){this.menu=t}start(){console.log(this.menu),this.menu}}class o{constructor(t,e,s,i){this.menu=t,this.game=e,this.tutorial=s,this.ctx=i.getContext(\"2d\"),this.menuCtx=i.getContext(\"2d\"),this.lastTime=0,this.title=document.getElementById(\"title-screen-text-wrapper\"),this.time=0}start(){const t=document.getElementById(\"menu\");t.addEventListener(\"mouseover\",this.menu.selectMouseOver),t.addEventListener(\"click\",t=>{this.selectEventCallback(t)}),document.addEventListener(\"keydown\",t=>{this.selectEventCallback(t)})}selectEventCallback(t){const e=document.getElementById(\"menu\");if(13!=t.keyCode||e.classList.contains(\"none\")){if(\"click\"!=t.type)return this.menu.keyPressed(t);this.select(this.menu.selectMouseClick(t))}else this.select(this.menu.keyPressed(t))}select(t){if(\"Start Game\"===t.innerText){const t=document.getElementById(\"title-audio\");this.title.classList.remove(\"appearing\"),this.title.classList.add(\"disappearing\"),t.volume=.3,this.game.ctx=this.ctx,this.title.addEventListener(\"animationend\",()=>{this.title.classList.add(\"none\"),t.pause(),document.getElementById(\"battleView\").classList.remove(\"none\"),this.game.start(this.menu)},{once:!0}),requestAnimationFrame(this.gameAnimate.bind(this))}else if(\"How To Play\"===t.innerText){const t=new Menu(\"\");this.tutorial.start(t)}}gameAnimate(t){this.time++,this.time>17&&(this.game.aniDone&&this.game.frame++,this.time=0,this.game.draw()),this.lastTime=t,requestAnimationFrame(this.gameAnimate.bind(this))}}function c(){setTimeout(()=>{const t=document.getElementById(\"title-audio\"),e=document.getElementById(\"volume-slider\"),s=document.getElementById(\"volume-display\"),i=document.getElementById(\"mute-toggle\");if(!(e&&s&&i&&t))return console.warn(\"Volume controls not found, retrying...\"),void setTimeout(c,500);let n=!0;function a(){const i=Math.round(100*t.volume);s.textContent=i+\"%\",e.value=i}t.muted=n,e.addEventListener(\"input\",e=>{const s=e.target.value/100;t.volume=s,a(),s>0&&n&&(n=!1,t.muted=!1,i.textContent=\"ðŸ”Š\")}),i.addEventListener(\"click\",()=>{n=!n,t.muted=n,i.textContent=n?\"ðŸ”‡\":\"ðŸ”Š\",!n&&t.paused&&t.play().catch(t=>console.log(\"Audio play failed:\",t))}),a(),i.textContent=n?\"ðŸ”‡\":\"ðŸ”Š\",console.log(\"âœ… Volume controls initialized\")},100)}function l(){setTimeout(()=>{const t=document.querySelector(\"#press-start h1\");t?(t.style.animation=\"pressEnterStrobe 1.5s infinite\",console.log(\"âœ… Strobe effect added\")):setTimeout(l,500)},100)}document.addEventListener(\"DOMContentLoaded\",()=>{const t=new i(\"#menu li\",\"menu\"),e=new h,s=document.getElementById(\"battle-view\"),n=document.getElementById(\"enemies-ui\"),a=document.getElementById(\"party-ui\"),d=new r(s);s.width=.85*window.innerWidth,s.height=.8*window.innerHeight,n.width=.3*(s.width-50),n.height=window.innerHeight-s.height-50,a.width=.3*(s.width-50),a.height=window.innerHeight-s.height-50;const u=new o(t,d,e,s,n,a);c(),l();let m=0,p=!0;if(t.selection(0),p){let e=document.getElementById(\"press-start\");e.addEventListener(\"animationend\",(function(){console.log(\"remounted\"),p=!1,document.body.addEventListener(\"keydown\",(function(s){13==s.keyCode&&(e.classList.remove(\"title-screen-appearing\"),t.cursorSelect.play(),e.classList.add(\"title-screen-disappear\"))}))})),e.addEventListener(\"animationend\",(function(){if(1===(m+=1))return;document.getElementById(\"title-screen-controller\").classList.add(\"none\"),u.start(),document.getElementById(\"title-screen-menu\").classList.remove(\"none\"),document.getElementById(\"title-audio\").volume=.3}))}})}]);","extractedComments":[]}