{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/menu.js","webpack:///./src/char.js","webpack:///./src/monster.js","webpack:///./src/game.js","webpack:///./src/tutorial.js","webpack:///./src/game_view.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","querySelec","menuId","this","tokenMenu","cursor","document","createElement","className","src","divShadow","cursorMove","Audio","volume","cursorSelect","menuItems","querySelectorAll","selectMouseOver","keyPressed","selectMouseClick","e","preventDefault","target","parentNode","id","parseInt","getAttribute","selection","play","keyCode","prepend","selectedNumber","Character","job","ctx","sprite","index","level","maxHealth","health","KO","frame","forward","back","partyHpUi","getElementById","getContext","font","spriteHeight","canvasX","canvas","width","canvasY","height","heightFloat","Math","abs","callback","walkForward","walkBack","drawImage","clearRect","fillText","isOdd","monster","console","log","damage","floor","random","showDamage","damageText","textContent","style","position","color","fontSize","fontWeight","zIndex","pointerEvents","left","top","transform","animation","body","appendChild","setTimeout","removeChild","int","num","Number","toString","replace","parseFloat","Monster","Image","monsterHpUi","smallMonsters","medMonsters","save","globalAlpha","restore","healthPercent","fillStyle","party","enemies","wave","currentChar","currentCharIndex","aniDone","partyMenu","battleState","turnQueue","currentTurn","actionInProgress","draw","charIndexIncrease","canvasInitialized","window","innerWidth","innerHeight","fillRect","drawBackground","addSprites","drawMonsters","addEventListener","backgroundColor","titleMenu","knight","cleric","archer","wizard","push","addEnemy","menu","partySelectEventCallback","classList","contains","type","onSelect","background","forEach","obj","selectedAction","innerText","performSimpleAttack","performSimpleDefend","aliveEnemies","filter","enemy","length","targetEnemy","attack","numEnemies","Tutorial","GameRouter","game","tutorial","menuCtx","lastTime","title","time","selectEventCallback","select","titleAudio","remove","add","pause","start","once","requestAnimationFrame","gameAnimate","Menu","error","errorCount","initVolumeControls","volumeSlider","volumeDisplay","muteToggle","warn","isMuted","updateVolumeDisplay","round","muted","paused","catch","addStrobeEffect","pressEnterElement","querySelector","menuClass","enemiesUi","partyUi","theGame","gameRouter","titleScreenBool","titleScreen"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class Menu {\n  constructor(querySelec, menuId){\n    this.tokenMenu = 0\n    this.menuId = menuId\n\n    this.cursor = document.createElement('img');\n      this.cursor.className = 'selected';\n      this.cursor.src = 'https://www.dropbox.com/s/1pq4d1ksjv3tuoz/FF7Cursor.png?raw=1';\n\n    this.divShadow = document.createElement('div'); //shadow of the hand cursor.\n      this.divShadow.className = 'shadow';\n\n    this.cursorMove = new Audio(); //move sound.\n      this.cursorMove.src =\"https://www.dropbox.com/s/fiyx4q2mdwynraj/FF7CursorMove.mp3?raw=1\";\n      this.cursorMove.volume = 0.4\n      \n    this.cursorSelect = new Audio();\n      this.cursorSelect.src = 'https://www.dropbox.com/s/v04ewrevpnnsz03/FF7CursorSaveLoad.mp3?raw=1';\n      this.cursorSelect.volume = 0.4\n\n    this.menuItems = document.querySelectorAll(`${querySelec}`);\n\n    this.selectMouseOver = this.selectMouseOver.bind(this);\n    this.keyPressed = this.keyPressed.bind(this);\n    this.selectMouseClick = this.selectMouseClick.bind(this);\n\n  }\n\n  selectMouseOver(e){\n    e.preventDefault();\n    if(e.target.parentNode.id == this.menuId){\n      this.tokenMenu = parseInt(e.target.getAttribute(\"number\"));\n      this.selection(this.tokenMenu);\n      this.cursorMove.play();\n    }\n  }\n\n  selectMouseClick(e){\n    e.preventDefault();\n    if(e.target.parentNode.id == this.menuId){\n      this.tokenMenu = parseInt(e.target.getAttribute(\"number\"));\n      this.cursorSelect.play();\n      return this.menuItems[this.tokenMenu]\n    }\n  }\n\n  keyPressed(e){\n    e.preventDefault();\n    if(e.keyCode == 38){  //ArrowUp\n      this.tokenMenu > 0 ? this.tokenMenu -=1 : this.tokenMenu = 1\n      this.selection(this.tokenMenu);\n      this.cursorMove.play();\n    } else if(e.keyCode == 40){ //ArrowDown\n      this.tokenMenu < 1 ? this.tokenMenu +=1 : this.tokenMenu = 0\n      this.selection(this.tokenMenu);\n      this.cursorMove.play();\n    } else if(e.keyCode == 13){\n      this.cursorSelect.play();\n      return this.menuItems[this.tokenMenu]\n    }\n  }\n\n  selection(tokenMenu){\n    this.menuItems[tokenMenu].prepend(this.cursor); //Prepend element before the selected target.\n    this.menuItems[tokenMenu].prepend(this.divShadow); \n  }\n\n  select(selectedNumber){\n    return this.menuItems[selectedNumber]\n  }\n\n}","export default class Character {\n  constructor(job, ctx, sprite, index){\n    this.level = 1;\n    this.maxHealth = 100\n    this.health = this.maxHealth;\n    this.KO = false;\n    this.job = job;\n    this.ctx = ctx;\n    this.sprite = sprite;\n    this.index = index;\n    this.frame = 0;\n    this.forward = false;\n    this.back = false;\n    this.partyHpUi = document.getElementById(\"party-ui\").getContext(\"2d\");\n    this.partyHpUi.font = \"26px Final Fantasy\";\n    this.spriteHeight(index);\n    this.canvasX = this.ctx.canvas.width * 0.85;\n    this.canvasY = this.ctx.canvas.height * this.heightFloat + this.ctx.canvas.height * 0.3;\n\n  }\n\n  isOdd(n){\n    return Math.abs(n % 2) == 1;\n  }\n\n  draw(callback){\n    if(this.forward && this.frame <= 9){\n      this.walkForward(callback);\n    }else if(this.back && this.frame >= 1 ){\n      this.walkBack();\n    }else{\n      this.ctx.drawImage(this.sprite, 0, 0, 64, 64, this.canvasX, this.canvasY , 125, 125 )\n    }\n    this.partyHpUi.clearRect(0, (this.index) * (this.partyHpUi.canvas.height / 4), this.partyHpUi.canvas.width, this.partyHpUi.canvas.height)\n    this.partyHpUi.fillText(this.job, 25, (this.index + 1) * (this.partyHpUi.canvas.height / 4))\n    this.partyHpUi.fillText(`${this.health} / ${this.maxHealth}`, this.partyHpUi.canvas.width - 125, (this.index + 1) * (this.partyHpUi.canvas.height / 4))\n\n  }\n\n  walkForward(callback){\n    this.frame++\n    if(this.isOdd(this.frame)){\n      this.ctx.drawImage(this.sprite, 64, 0, 64, 64, this.canvasX -= parseInt(this.frame + \"0\"), this.canvasY , 125, 125 )\n    }else if(this.frame <= 9){\n      this.ctx.drawImage(this.sprite, 0, 0, 64, 64, this.canvasX -= parseInt(this.frame + \"0\"), this.canvasY , 125, 125 )\n    }\n    if (this.frame == 10){\n        callback()\n    }\n\n  }\n\n  walkBack(){\n    this.frame--\n      if(this.isOdd(this.frame)){\n        this.ctx.drawImage(this.sprite, 64, 0, 64, 64, this.canvasX += parseInt(this.frame + \"0\"), this.canvasY , 125, 125 )\n      }else if(this.frame >= 1){\n        this.ctx.drawImage(this.sprite, 0, 0, 64, 64, this.canvasX += parseInt(this.frame + \"0\"), this.canvasY , 125, 125 )\n      }\n  }\n\n  // walkingCaller(callback){ \n  //     if( this.frame < 10 ){\n  //       this.walkForward(callback);\n  //     }else if( this.frame > 0){\n  //       this.walkBack(callback);\n  //     }\n  // }\n\n  attack(monster){\n    if (monster.health <= 0) {\n      console.log('Monster is already dead!');\n      return;\n    }\n    \n    const damage = Math.floor(Math.random() * 30) + 15; // 15-45 damage\n    monster.health -= damage;\n    \n    if (monster.health <= 0) {\n      monster.health = 0;\n      monster.KO = true;\n      console.log(`Monster defeated! Dealt ${damage} damage.`);\n    } else {\n      console.log(`Dealt ${damage} damage to monster. Monster health: ${monster.health}`);\n    }\n    \n    // Add visual feedback\n    this.showDamage(damage);\n  }\n  \n  showDamage(damage) {\n    // Create damage text element\n    const damageText = document.createElement('div');\n    damageText.textContent = `-${damage}`;\n    damageText.style.position = 'absolute';\n    damageText.style.color = '#ff4444';\n    damageText.style.fontSize = '24px';\n    damageText.style.fontWeight = 'bold';\n    damageText.style.zIndex = '1000';\n    damageText.style.pointerEvents = 'none';\n    damageText.style.left = '50%';\n    damageText.style.top = '30%';\n    damageText.style.transform = 'translateX(-50%)';\n    damageText.style.animation = 'damageFloat 1.5s ease-out forwards';\n    \n    document.body.appendChild(damageText);\n    \n    // Remove after animation\n    setTimeout(() => {\n      if (damageText.parentNode) {\n        damageText.parentNode.removeChild(damageText);\n      }\n    }, 1500);\n  }\n\n  spriteHeight(int){\n    let numFloat = int + int * 0.5\n    let num = Number(numFloat.toString().replace('.',''))\n    this.heightFloat = parseFloat(`0.${num}`)\n  }\n\n\n}","export default class Monster {\n  constructor(ctx, index){\n    this.level = 1;\n    this.maxHealth = 100;\n    this.health = this.maxHealth;\n    this.KO = false;\n    // this.type = type;\n    this.ctx = ctx;\n    this.sprite = new Image();\n      this.sprite.src = \"Final_Fantasy_1_Enemies & Bosses.png\"\n    this.index = index;\n    this.frame = 0;\n    this.monsterHpUi = document.getElementById(\"enemies-ui\").getContext(\"2d\");\n    this.monsterHpUi.font = \"26px Final Fantasy\";\n    this.spriteHeight(index)\n    this.canvasX = this.ctx.canvas.width / 8\n    this.canvasY = this.ctx.canvas.height * this.heightFloat + this.ctx.canvas.height / 3.5 \n\n    this.smallMonsters = [\n      [0, 0, 36, 64]\n    ]\n\n    this.medMonsters = [\n\n    ]\n\n  };\n\n\n  draw(){\n    // Only draw if alive\n    if (!this.KO && this.health > 0) {\n      this.ctx.drawImage(this.sprite, ...this.smallMonsters[0], this.canvasX, this.canvasY, 125, 200);\n    } else {\n      // Draw grayed out or don't draw at all\n      this.ctx.save();\n      this.ctx.globalAlpha = 0.3;\n      this.ctx.drawImage(this.sprite, ...this.smallMonsters[0], this.canvasX, this.canvasY, 125, 200);\n      this.ctx.restore();\n    }\n    \n    this.monsterHpUi.clearRect(0, (this.index) * (this.monsterHpUi.canvas.height / 4), this.monsterHpUi.canvas.width, this.monsterHpUi.canvas.height);\n    \n    // Color code the health text\n    const healthPercent = this.health / this.maxHealth;\n    if (healthPercent > 0.6) {\n      this.monsterHpUi.fillStyle = '#00ff00'; // Green\n    } else if (healthPercent > 0.3) {\n      this.monsterHpUi.fillStyle = '#ffff00'; // Yellow\n    } else {\n      this.monsterHpUi.fillStyle = '#ff0000'; // Red\n    }\n    \n    this.monsterHpUi.fillText(`Monster ${this.index + 1}`, 25, (this.index + 1) * (this.monsterHpUi.canvas.height / 4));\n    this.monsterHpUi.fillText(`${this.health} / ${this.maxHealth}`, this.monsterHpUi.canvas.width - 125, (this.index + 1) * (this.monsterHpUi.canvas.height / 4));\n    \n    // Reset color\n    this.monsterHpUi.fillStyle = '#ffffff';\n  }\n\n  death(){\n    this.KO = true;\n    this.health = 0;\n    // Add death animation or effects here\n    console.log(`Monster ${this.index + 1} has been defeated!`);\n  }\n  \n  attack(target) {\n    if (this.KO || this.health <= 0) {\n      return;\n    }\n    \n    const damage = Math.floor(Math.random() * 20) + 10; // 10-30 damage\n    target.health -= damage;\n    \n    if (target.health <= 0) {\n      target.health = 0;\n      target.KO = true;\n      console.log(`${target.job} has been defeated! Monster dealt ${damage} damage.`);\n    } else {\n      console.log(`Monster dealt ${damage} damage to ${target.job}. ${target.job} health: ${target.health}`);\n    }\n    \n    return damage;\n  }\n  \n  isAlive() {\n    return !this.KO && this.health > 0;\n  }\n\n\n\n  spriteHeight(int){\n    let numFloat = int + int * 0.5\n    let num = Number(numFloat.toString().replace('.',''))\n    this.heightFloat = parseFloat(`0.${num}`)\n  }\n\n}\n\n\n\n","import Sprite from \"./char\"\nimport Monster from \"./monster\"\nimport Menu from \"./menu\"\nexport default class Game {\n  constructor(ctx){\n    this.party = [];\n    this.enemies = [];\n    this.wave = 0;\n    this.currentChar = null;\n    this.currentCharIndex = 0;\n    this.ctx = ctx;\n    this.frame = 0;\n    this.aniDone = false;\n    this.partyMenu = new Menu(\"#party-moves li\", \"party-moves\");\n    this.wave = 0;\n    this.battleState = 'player-turn'; // 'player-turn', 'enemy-turn', 'victory', 'defeat'\n    this.turnQueue = [];\n    this.currentTurn = 0;\n    this.actionInProgress = false;\n\n    this.draw = this.draw.bind(this);\n    this.charIndexIncrease = this.charIndexIncrease.bind(this);\n  }\n\n  draw(){\n    this.currentChar = this.party[this.currentCharIndex];\n    \n    // Fix canvas sizing - don't change canvas dimensions every frame\n    if (!this.canvasInitialized) {\n      this.ctx.canvas.width = window.innerWidth * 0.85;\n      this.ctx.canvas.height = window.innerHeight * 0.80;\n      this.canvasInitialized = true;\n    }\n    \n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.fillStyle = \"black\";\n    this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    \n    this.drawBackground();\n    this.addSprites();\n    this.drawMonsters();\n    document.body.addEventListener(\"animationend\" , () => {\n      document.body.style.backgroundColor = \"black\";\n      this.aniDone = true;\n       if(this.currentChar) this.currentChar.forward = true;\n    })\n  }\n\n  start(titleMenu){\n    const knight = new Sprite(\"Knight\", this.ctx, null, 0);\n    const cleric = new Sprite(\"Cleric\", this.ctx, null, 1);\n    const archer = new Sprite(\"Archer\", this.ctx, null, 2);\n    const wizard = new Sprite(\"Wizard\", this.ctx, null, 3);\n    this.party.push(knight, cleric, archer, wizard);\n    this.addEnemy()\n    // this.createMonsters();\n    // document.removeEventListener(\"keydown\")\n    const menu = document.getElementById(\"party-moves\");\n    menu.addEventListener('mouseover', this.partyMenu.selectMouseOver);\n    menu.addEventListener('click', (e) => { this.partySelectEventCallback(e) });\n    document.addEventListener('keydown', (e) => { this.partySelectEventCallback(e) });\n    this.partyMenu.selection(0);\n\n  }\n\n  partySelectEventCallback(e){\n    const menu = document.getElementById(\"party-moves\");\n    if(e.keyCode == 13 && !menu.classList.contains(\"none\")){\n      this.onSelect(this.partyMenu.keyPressed(e));\n    }else if(e.type == \"click\"){\n      this.onSelect(this.partyMenu.selectMouseClick(e));\n    }else{\n      return this.partyMenu.keyPressed(e)\n    }\n  };\n  \n  drawBackground(){\n    const background = new Image()\n      background.src = \"battle_backgrounds.png\"\n    this.ctx.drawImage(background, 522, 5, 270, 155, 0, 0, this.ctx.width, this.ctx.height)\n  }\n\n  addSprites(){\n    this.party.forEach((obj, index) => {\n      let sprite = new Image();\n        sprite.src = `image${index}.png`;\n      obj.sprite = sprite;\n      obj.index = index;\n\n      obj.draw(this.charIndexIncrease);\n    })\n  }\n\n  drawMonsters(){\n    this.enemies.forEach((obj, index) => {\n      obj.draw();\n    })\n  }\n\n  onSelect(selection){\n    if (this.actionInProgress) {\n      return;\n    }\n    \n    this.actionInProgress = true;\n    const selectedAction = selection.innerText;\n    \n    if (selectedAction === 'Attack') {\n      this.performSimpleAttack();\n    } else if (selectedAction === 'Defend') {\n      this.performSimpleDefend();\n    }\n  }\n  \n  performSimpleAttack() {\n    // Simple attack without complex turn system\n    const aliveEnemies = this.enemies.filter(enemy => enemy.health > 0);\n    if (aliveEnemies.length === 0) {\n      this.actionInProgress = false;\n      return;\n    }\n    \n    const targetEnemy = aliveEnemies[Math.floor(Math.random() * aliveEnemies.length)];\n    \n    this.currentChar.back = false;\n    this.currentChar.forward = true;\n    this.currentChar.attack(targetEnemy);\n    \n    // Simple turn progression\n    setTimeout(() => {\n      this.currentChar.back = true;\n      this.currentChar.forward = false;\n      this.actionInProgress = false;\n      this.charIndexIncrease();\n    }, 800);\n  }\n  \n  performSimpleDefend() {\n    console.log(`${this.currentChar.job} is defending!`);\n    \n    setTimeout(() => {\n      this.actionInProgress = false;\n      this.charIndexIncrease();\n    }, 400);\n  }\n\n\n  addEnemy(){\n    const numEnemies = Math.floor(Math.random() * 4) + 1\n    for (let index = 0; index < numEnemies; index++){\n      const monster = new Monster(this.ctx, index);\n      this.enemies.push(monster)\n    }\n\n  }\n\n  charIndexIncrease(){\n    // Skip KO'd characters\n    do {\n      this.currentCharIndex >= 3 ? this.currentCharIndex = 0 : this.currentCharIndex++;\n    } while (this.party[this.currentCharIndex] && this.party[this.currentCharIndex].KO);\n  }\n  \n\n\n}","export default class Tutorial{\n  constructor(menu){\n    this.menu = menu\n  }\n\n  start(){\n    console.log(this.menu)\n    this.menu\n  }\n\n  \n}","export default class GameRouter {\n  constructor(menu,game,tutorial,canvas){  \n    this.menu = menu;\n    this.game = game;\n    this.tutorial = tutorial;\n    this.ctx = canvas.getContext(\"2d\");\n    this.menuCtx = canvas.getContext(\"2d\")\n    this.lastTime = 0;\n    this.title = document.getElementById(\"title-screen-text-wrapper\")\n    this.time = 0\n  }\n\n\n  start(){\n    const menu = document.getElementById(\"menu\")\n    menu.addEventListener('mouseover', this.menu.selectMouseOver)\n    menu.addEventListener('click', (e) => { this.selectEventCallback(e) })\n    document.addEventListener('keydown', (e) => { this.selectEventCallback(e) })\n\n  }\n\n  selectEventCallback(e){\n    const menu = document.getElementById(\"menu\")\n    if(e.keyCode == 13 && !menu.classList.contains(\"none\")){\n      this.select(this.menu.keyPressed(e))\n    }else if(e.type == \"click\"){\n      this.select(this.menu.selectMouseClick(e))\n    }else{\n      return this.menu.keyPressed(e)\n    }\n  }\n\n  select(selection){\n    if (selection.innerText === \"Start Game\" ) {\n      const titleAudio = document.getElementById(\"title-audio\")\n      this.title.classList.remove(\"appearing\");\n      this.title.classList.add(\"disappearing\");\n      titleAudio.volume = 0.3\n      this.game.ctx = this.ctx\n      \n      this.title.addEventListener(\"animationend\", () => {\n        this.title.classList.add(\"none\");\n        titleAudio.pause();      \n        document.getElementById(\"battleView\").classList.remove(\"none\");\n        this.game.start(this.menu);\n      }, {once: true})\n      requestAnimationFrame(this.gameAnimate.bind(this));\n\n    }else if(selection.innerText === \"How To Play\"){\n      const menu = new Menu(\"\")\n      this.tutorial.start(menu)\n    }else{\n    }\n    // this.game.onSelect()\n  }\n\n  gameAnimate(time) {\n    // Limit to 60fps to prevent performance issues\n    const timeDelta = time - this.lastTime;\n    if (timeDelta < 16.67) { // ~60fps limit\n      requestAnimationFrame(this.gameAnimate.bind(this));\n      return;\n    }\n    \n    this.time++;\n    \n    // Reduce animation frequency to prevent spam\n    if(this.time > 30){ // Slower animation updates\n      if(this.game.aniDone){ \n        this.game.frame++;\n      }\n      this.time = 0;\n      \n      try {\n        this.game.draw();\n      } catch (error) {\n        console.error('Game draw error:', error);\n        // Don't spam errors - stop animation on repeated errors\n        if (this.errorCount > 10) {\n          console.error('Too many errors, stopping animation');\n          return;\n        }\n        this.errorCount = (this.errorCount || 0) + 1;\n      }\n    }\n    \n    this.lastTime = time;\n    requestAnimationFrame(this.gameAnimate.bind(this));\n  };\n\n\n}","import Menu from \"./menu\";\nimport Game from \"./game\"\nimport Instructions from \"./tutorial\"\nimport GameView from \"./game_view\"\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const menuClass = new Menu('#menu li', \"menu\");\n  const tutorial = new Instructions;\n  const canvas = document.getElementById(\"battle-view\");\n  const enemiesUi = document.getElementById(\"enemies-ui\");\n  const partyUi = document.getElementById(\"party-ui\");\n  const theGame = new Game(canvas);\n  canvas.width  = window.innerWidth * 0.85;\n  canvas.height = window.innerHeight * 0.80;\n  enemiesUi.width  = (canvas.width - 50) * 0.3;\n  enemiesUi.height = window.innerHeight - canvas.height - 50;\n  partyUi.width  = (canvas.width - 50) * 0.3;\n  partyUi.height = window.innerHeight - canvas.height - 50;\n  const gameRouter = new GameView(menuClass, theGame, tutorial, canvas, enemiesUi, partyUi);\n\n  // Initialize volume controls immediately (before press enter)\n  initVolumeControls();\n  \n  // Add strobe effect to press enter\n  addStrobeEffect();\n\n  let i = 0;\n  let titleScreenBool = true;\n  menuClass.selection(0);\n\n  if(titleScreenBool){\n    let titleScreen = document.getElementById(\"press-start\");\n    titleScreen.addEventListener(\"animationend\", function(){\n      console.log(\"remounted\");\n      titleScreenBool = false;\n      document.body.addEventListener('keydown', function(e){\n        if(e.keyCode == 13){\n          titleScreen.classList.remove(\"title-screen-appearing\");\n          menuClass.cursorSelect.play();\n          titleScreen.classList.add(\"title-screen-disappear\");\n        }\n      });\n    });\n    \n    titleScreen.addEventListener(\"animationend\", function(){\n      i += 1;\n      if(i === 1){ return; }\n      document.getElementById(\"title-screen-controller\").classList.add(\"none\");\n      gameRouter.start();\n      document.getElementById(\"title-screen-menu\").classList.remove(\"none\");\n      let titleMusic = document.getElementById(\"title-audio\");\n      titleMusic.volume = 0.3;\n      // Auto-mute: don't auto-play\n      // titleMusic.play();\n    });\n  }\n});\n\n// Volume controls - appear immediately before press enter\nfunction initVolumeControls() {\n  setTimeout(() => {\n    const titleAudio = document.getElementById('title-audio');\n    const volumeSlider = document.getElementById('volume-slider');\n    const volumeDisplay = document.getElementById('volume-display');\n    const muteToggle = document.getElementById('mute-toggle');\n    \n    if (!volumeSlider || !volumeDisplay || !muteToggle || !titleAudio) {\n      console.warn('Volume controls not found, retrying...');\n      setTimeout(initVolumeControls, 500);\n      return;\n    }\n    \n    let isMuted = true; // Start muted (auto-mute title screen)\n    titleAudio.muted = isMuted;\n    \n    function updateVolumeDisplay() {\n      const volume = Math.round(titleAudio.volume * 100);\n      volumeDisplay.textContent = volume + '%';\n      volumeSlider.value = volume;\n    }\n    \n    volumeSlider.addEventListener('input', (e) => {\n      const volume = e.target.value / 100;\n      titleAudio.volume = volume;\n      updateVolumeDisplay();\n      \n      if (volume > 0 && isMuted) {\n        isMuted = false;\n        titleAudio.muted = false;\n        muteToggle.textContent = 'ðŸ”Š';\n      }\n    });\n    \n    muteToggle.addEventListener('click', () => {\n      isMuted = !isMuted;\n      titleAudio.muted = isMuted;\n      muteToggle.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';\n      \n      if (!isMuted && titleAudio.paused) {\n        titleAudio.play().catch(e => console.log('Audio play failed:', e));\n      }\n    });\n    \n    updateVolumeDisplay();\n    muteToggle.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';\n    console.log('âœ… Volume controls initialized');\n  }, 100);\n}\n\n// Add strobe effect to press enter text\nfunction addStrobeEffect() {\n  setTimeout(() => {\n    const pressEnterElement = document.querySelector('#press-start h1');\n    if (pressEnterElement) {\n      pressEnterElement.style.animation = 'pressEnterStrobe 1.5s infinite';\n      console.log('âœ… Strobe effect added');\n    } else {\n      setTimeout(addStrobeEffect, 500);\n    }\n  }, 100);\n}"],"sourceRoot":""}